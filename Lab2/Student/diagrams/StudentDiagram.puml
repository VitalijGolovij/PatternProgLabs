@startuml
'https://plantuml.com/sequence-diagram
Class Student_short
 {
      -id: Integer
      -name: String
      -contact: String
      -git: String
 --
      +{static}initialize(Integer, String)
      +{static}from_student(Student)
      +have_contact?(): Boolean
      +have_git?(): Boolean
      +validate?(): Boolean
      .. Геттеры ..
      +id(): Integer
      +git(): String
      +name(): String
      +contact(): String
      .. Сеттеры ..
  }


Class Student extends Student_short{
     -surname: String
     -patronymic: String
     -phone: String
     -mail: String
     -telegram: String
--
     +{static}is_name?(String): Boolean
     +{static}is_phone?(String): Boolean
     +{static}is_telegram?(String): Boolean
     +{static}is_mail?(String): Boolean
     +{static}initialize(Hash)
     +{static}from_json_str(String)
     -{static}from_student(Student)
     +set_contacts()
     -get_any_contact(): String
     +get_info(): String
     +to_s(): String
     .. Геттеры ..
     +phone(): String
     +telegram(): String
     +mail(): String
     +surname(): String
     +patronymic(): String
     .. Сеттеры ..
     +id=(Integer)
     +git=(String)
     +phone=(String)
     +telegram=(String)
     +mail=(String)
     +name=(String)
     +surname=(String)
     +patronymic=(String)
 }

Class Data_list
 {
      -list: Array
      -selected: Array
 --
      +{static}initialize(Array)
      +select(Integer)
      +get_selected(): Array
      +get_data(): Data_table
      -get_names(): Array
      -fill_row(Array, Array): Array
      -fill_table(Array, Array): Array
..Сеттеры..
      +list=(Array)
  }

Class Data_list_student_short extends Data_list
 {
 --
      -get_names(): Array
      -fill_row(Array, Array) :Array
  }

Class Data_table
 {
      -table: Array
 --
      +{static}initialize(Array)
      +get_elem(Integer, Integer): Object
      +rows_count(): Integer
      +columns_count(): Integer
  }
Class Student_list
{
+list: Array
+file_worker: Student_list_file_worker
+id_counter
--
      +initialize()
+read_from_file(String): Array
+write_to_file(String)
+write_to_file(String)
+set_file_worker(Student_list_file_worker)
      +get_student_by_id(Integer): Student
      +get_k_n_student_short_list(Integer, Integer, Data_list): Data_list_student_short
      +sort_by_shortname()
      +put_student(Student, Integer)
      +replace_by_id(Integer)
      +drop_by_id(Integer)
      +get_student_short_count(): Integer
}

Class Student_list_file_worker
{
--
+read_from_file
+write_to_file
}

Class Student_list_txt extends Student_list_file_worker
{
--
+read_from_file(String): Array
+write_to_file(String, Hash)
}

Class Student_list_JSON extends Student_list_file_worker
{
--
+read_from_file(String): Array
+write_to_file(String, Hash)
}

Class Student_list_YAML extends Student_list_file_worker
{
--
+read_from_file(String): Array
+write_to_file(String, Hash)
}
Class Database_student_worker
{
db_worker: Mysql2::Client
--
-query_to_list(Strind): Array
-args_to_string(Array): String
+select(String, Array): Array
+select_by_id(String, Integer, Array): Array
+insert(String, Hash)
+delete_by_id(String, Integer)
+update_by_id(String, Integer, Hash)
}
Class Student_list_DB
{
db_client: Database_student_worker
--
-initialise(Hash)
+{static} get_instance (Hash): Database_student_worker
+insert_student(Student)
+replace_by_id(Integer, Student)
+drop_by_id(Integer)
+get_student_short_count: Integer
+get_student_by_id(Integer): Student
+get_k_n_student_short_list(Integer, Intefer, Data_list): Data_list_student_short
+get_student_count: Integer
}
Database_student_worker--*Student_list_DB
Student_list_file_worker --* Student_list
Data_list_student_short --> Data_table
Student_list *-- Student
@enduml